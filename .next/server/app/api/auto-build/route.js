"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auto-build/route";
exports.ids = ["app/api/auto-build/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauto-build%2Froute&page=%2Fapi%2Fauto-build%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauto-build%2Froute.ts&appDir=%2Fhome%2Ffelix%2FDesktop%2FCommanderDeckBuilder%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Ffelix%2FDesktop%2FCommanderDeckBuilder&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauto-build%2Froute&page=%2Fapi%2Fauto-build%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauto-build%2Froute.ts&appDir=%2Fhome%2Ffelix%2FDesktop%2FCommanderDeckBuilder%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Ffelix%2FDesktop%2FCommanderDeckBuilder&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_felix_Desktop_CommanderDeckBuilder_app_api_auto_build_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auto-build/route.ts */ \"(rsc)/./app/api/auto-build/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auto-build/route\",\n        pathname: \"/api/auto-build\",\n        filename: \"route\",\n        bundlePath: \"app/api/auto-build/route\"\n    },\n    resolvedPagePath: \"/home/felix/Desktop/CommanderDeckBuilder/app/api/auto-build/route.ts\",\n    nextConfigOutput,\n    userland: _home_felix_Desktop_CommanderDeckBuilder_app_api_auto_build_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auto-build/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRvLWJ1aWxkJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhdXRvLWJ1aWxkJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYXV0by1idWlsZCUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGZmVsaXglMkZEZXNrdG9wJTJGQ29tbWFuZGVyRGVja0J1aWxkZXIlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmhvbWUlMkZmZWxpeCUyRkRlc2t0b3AlMkZDb21tYW5kZXJEZWNrQnVpbGRlciZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDb0I7QUFDakc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb21tYW5kZXItZGVjay1idWlsZGVyLz85ZGE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9ob21lL2ZlbGl4L0Rlc2t0b3AvQ29tbWFuZGVyRGVja0J1aWxkZXIvYXBwL2FwaS9hdXRvLWJ1aWxkL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdXRvLWJ1aWxkL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0by1idWlsZFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYXV0by1idWlsZC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL2ZlbGl4L0Rlc2t0b3AvQ29tbWFuZGVyRGVja0J1aWxkZXIvYXBwL2FwaS9hdXRvLWJ1aWxkL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hdXRvLWJ1aWxkL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauto-build%2Froute&page=%2Fapi%2Fauto-build%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauto-build%2Froute.ts&appDir=%2Fhome%2Ffelix%2FDesktop%2FCommanderDeckBuilder%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Ffelix%2FDesktop%2FCommanderDeckBuilder&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/auto-build/route.ts":
/*!*************************************!*\
  !*** ./app/api/auto-build/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\n//\n// ---- Route Handler ----\n//\nasync function POST(request) {\n    try {\n        //\n        // Parse request safely\n        //\n        const body = await request.json();\n        const { commanderName, collection = [] } = body;\n        if (!commanderName) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Commander name is required\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"Building deck for:\", commanderName);\n        console.log(\"Collection size:\", collection.length);\n        //\n        // Fetch commander data\n        //\n        const commanderResponse = await fetch(`https://api.scryfall.com/cards/named?exact=${encodeURIComponent(commanderName)}`);\n        if (!commanderResponse.ok) {\n            console.error(\"Commander not found:\", commanderName);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Commander not found\"\n            }, {\n                status: 404\n            });\n        }\n        const commander = await commanderResponse.json();\n        const commanderColors = commander.color_identity ?? [];\n        console.log(\"Commander colors:\", commanderColors);\n        //\n        // Deck container\n        //\n        const TARGET_NON_LAND = 60;\n        const TARGET_LANDS = 39;\n        const cardNames = [];\n        //\n        // ---- STEP 1: Filter collection ----\n        //\n        const eligible = collection.filter((card)=>{\n            const type = card.details?.type_line ?? \"\";\n            const ci = card.details?.color_identity ?? [];\n            if (card.name.toLowerCase() === commanderName.toLowerCase()) return false;\n            if (type.includes(\"Basic Land\")) return false;\n            return ci.every((c)=>commanderColors.includes(c));\n        });\n        // Singleton rule: dedupe by name\n        const uniqueEligible = Array.from(new Map(eligible.map((c)=>[\n                c.name,\n                c\n            ])).values());\n        console.log(\"Eligible:\", uniqueEligible.length);\n        //\n        // Categorize\n        //\n        //\n        // ---- STEP 1.5: Fetch Staples (NEW) ----\n        //\n        const TARGET_STAPLES = 15;\n        const staples = [];\n        const suggestedDetails = [];\n        try {\n            const colorQuery = commanderColors.length === 0 ? \"id:c\" : `id<=${commanderColors.join(\"\")}`;\n            // Fetch slightly more to ensure we get non-lands\n            const staplesResp = await fetch(`https://api.scryfall.com/cards/search?q=${encodeURIComponent(`${colorQuery} legal:commander -t:land -t:basic`)}&order=edhrec&dir=asc&page=1`);\n            if (staplesResp.ok) {\n                const data = await staplesResp.json();\n                // Filter out commander itself just in case\n                const list = data.data.filter((c)=>c.name !== commanderName).slice(0, TARGET_STAPLES);\n                staples.push(...list);\n                suggestedDetails.push(...list);\n            }\n        } catch (e) {\n            console.error(\"Failed to fetch staples\", e);\n        }\n        // Helper predicates\n        const isCreature = (t, n)=>t.includes(\"Creature\") && !t.includes(\"Legendary\");\n        const isRemoval = (t, n)=>/Instant|Sorcery/.test(t) && /destroy|exile|kill|terminate|path|swords|wrath|damnation|wipe/.test(n.toLowerCase());\n        const isRamp = (t, n)=>/(Artifact|Enchantment|Sorcery)/.test(t) && /(sol ring|mana|ramp|cultivate|kodama|reach|signet|talisman|arcane|fellwar)/.test(n.toLowerCase());\n        const isDraw = (n)=>/(draw|rhystic|study|mystic|remora|phyrexian arena|necropotence|sylvan library)/.test(n.toLowerCase());\n        // Add staples and count\n        let rampCount = 0;\n        let drawCount = 0;\n        let removalCount = 0;\n        let creatureCount = 0;\n        staples.forEach((c)=>{\n            cardNames.push(c.name);\n            const t = c.type_line || \"\";\n            const n = c.name;\n            if (isRamp(t, n)) rampCount++;\n            else if (isDraw(n)) drawCount++;\n            else if (isRemoval(t, n)) removalCount++;\n            else if (isCreature(t, n)) creatureCount++;\n        });\n        console.log(`Added ${staples.length} staples. Ramp: ${rampCount}, Draw: ${drawCount}, Removal: ${removalCount}, Creatures: ${creatureCount}`);\n        //\n        // Categorize Collection (excluding staples)\n        //\n        const creatures = uniqueEligible.filter((c)=>{\n            if (cardNames.includes(c.name)) return false;\n            const t = c.details?.type_line ?? \"\";\n            const n = c.name;\n            return isCreature(t, n);\n        });\n        const removal = uniqueEligible.filter((c)=>{\n            if (cardNames.includes(c.name)) return false;\n            const t = c.details?.type_line ?? \"\";\n            const n = c.name;\n            return isRemoval(t, n);\n        });\n        const ramp = uniqueEligible.filter((c)=>{\n            if (cardNames.includes(c.name)) return false;\n            const t = c.details?.type_line ?? \"\";\n            const n = c.name;\n            return isRamp(t, n);\n        });\n        const draw = uniqueEligible.filter((c)=>{\n            if (cardNames.includes(c.name)) return false;\n            const n = c.name;\n            return isDraw(n);\n        });\n        const nonBasicLands = uniqueEligible.filter((c)=>{\n            const t = c.details?.type_line ?? \"\";\n            return t.includes(\"Land\") && !t.includes(\"Basic\");\n        });\n        const other = uniqueEligible.filter((c)=>!cardNames.includes(c.name) && !creatures.includes(c) && !removal.includes(c) && !ramp.includes(c) && !draw.includes(c) && !nonBasicLands.includes(c));\n        //\n        // Card-adding helper\n        //\n        const addCards = (list, max)=>{\n            const chosen = list.slice(0, max).map((c)=>c.name);\n            cardNames.push(...chosen);\n            return chosen.length;\n        };\n        //\n        // Build non-land section using ratios (adjusted for staples)\n        //\n        let added = 0;\n        added += addCards(ramp, Math.max(0, 10 - rampCount));\n        added += addCards(draw, Math.max(0, 5 - drawCount));\n        added += addCards(removal, Math.max(0, 10 - removalCount));\n        added += addCards(creatures, Math.max(0, 30 - creatureCount));\n        // Fill remainder with other cards from collection\n        const remainingSlots = Math.max(0, TARGET_NON_LAND - cardNames.length);\n        added += addCards(other, remainingSlots);\n        console.log(\"Added from collection:\", added);\n        //\n        // ---- STEP 2: Suggest Scryfall fillers if needed ----\n        //\n        if (cardNames.length < TARGET_NON_LAND) {\n            const need = TARGET_NON_LAND - cardNames.length;\n            console.log(\"Need additional:\", need);\n            const colorQuery = commanderColors.length === 0 ? \"id:c\" : `id<=${commanderColors.join(\"\")}`;\n            const scryQuery = `${colorQuery} -t:basic f:commander legal:commander usd<=2`;\n            const resp = await fetch(`https://api.scryfall.com/cards/search?q=${encodeURIComponent(scryQuery)}&order=edhrec&dir=asc&page=1`);\n            if (resp.ok) {\n                const data = await resp.json();\n                const suggestions = data.data.filter((c)=>c.name.toLowerCase() !== commanderName.toLowerCase() && !cardNames.includes(c.name)).slice(0, need);\n                suggestions.forEach((c)=>{\n                    cardNames.push(c.name);\n                    suggestedDetails.push(c);\n                });\n            }\n        }\n        //\n        // ---- STEP 3: Add lands ----\n        //\n        const basicMap = {\n            W: \"Plains\",\n            U: \"Island\",\n            B: \"Swamp\",\n            R: \"Mountain\",\n            G: \"Forest\"\n        };\n        let landCount = 0;\n        // add non-basic from collection\n        const eligibleNonBasicLands = uniqueEligible.filter((c)=>{\n            const type = c.details?.type_line ?? \"\";\n            const ci = c.details?.color_identity ?? [];\n            return type.includes(\"Land\") && !type.includes(\"Basic\") && ci.every((x)=>commanderColors.includes(x));\n        });\n        const nonBasicToAdd = Math.min(eligibleNonBasicLands.length, Math.floor(TARGET_LANDS / 2));\n        eligibleNonBasicLands.slice(0, nonBasicToAdd).forEach((c)=>cardNames.push(c.name));\n        landCount += nonBasicToAdd;\n        // fill with basics\n        const remaining = TARGET_LANDS - landCount;\n        const perColor = commanderColors.length ? Math.floor(remaining / commanderColors.length) : 0;\n        const extra = commanderColors.length ? remaining % commanderColors.length : 0;\n        commanderColors.forEach((color, i)=>{\n            const landName = basicMap[color];\n            if (!landName) return;\n            let count = perColor + (i < extra ? 1 : 0);\n            for(let x = 0; x < count; x++)cardNames.push(landName);\n        });\n        console.log(\"Total cards:\", cardNames.length);\n        //\n        // Return deck\n        //\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            deckName: `Auto-built ${commanderName} deck`,\n            cardNames,\n            suggestedDetails,\n            deckUrl: `https://edhrec.com/commanders/${commander.name.toLowerCase().replace(/[^a-z0-9]+/g, \"-\")}`\n        });\n    } catch (err) {\n        console.error(\"Auto-build error:\", err);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to build deck\",\n            details: err instanceof Error ? err.message : String(err)\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RTVDLEVBQUU7UUFDRixjQUFjO1FBQ2QsRUFBRTtRQUNGLE9BQU9YLHFEQUFZQSxDQUFDSSxJQUFJLENBQUM7WUFDckI4RixTQUFTO1lBQ1RDLFVBQVUsQ0FBQyxXQUFXLEVBQUU5RixjQUFjLEtBQUssQ0FBQztZQUM1Q2dCO1lBQ0FxQjtZQUNBMEQsU0FBUyxDQUFDLDhCQUE4QixFQUFFcEYsVUFBVWEsSUFBSSxDQUNuREMsV0FBVyxHQUNYdUUsT0FBTyxDQUFDLGVBQWUsS0FBSyxDQUFDO1FBQ3RDO0lBRUosRUFBRSxPQUFPQyxLQUFLO1FBQ1Y3RixRQUFRRixLQUFLLENBQUMscUJBQXFCK0Y7UUFDbkMsT0FBT3RHLHFEQUFZQSxDQUFDSSxJQUFJLENBQ3BCO1lBQ0lHLE9BQU87WUFDUG1CLFNBQVM0RSxlQUFlQyxRQUFRRCxJQUFJRSxPQUFPLEdBQUdDLE9BQU9IO1FBQ3pELEdBQ0E7WUFBRTlGLFFBQVE7UUFBSTtJQUV0QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29tbWFuZGVyLWRlY2stYnVpbGRlci8uL2FwcC9hcGkvYXV0by1idWlsZC9yb3V0ZS50cz9kYjU3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5cbi8vXG4vLyAtLS0tIFR5cGVzIC0tLS1cbi8vXG5cbmludGVyZmFjZSBTY3J5ZmFsbENhcmQge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHR5cGVfbGluZTogc3RyaW5nO1xuICAgIGNvbG9yX2lkZW50aXR5OiBzdHJpbmdbXTtcbiAgICBlZGhyZWNfcmFuaz86IG51bWJlcjtcbiAgICBtYW5hX2Nvc3Q/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBDb2xsZWN0aW9uQ2FyZCB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHNjcnlmYWxsSWQ6IHN0cmluZztcbiAgICBkZXRhaWxzPzoge1xuICAgICAgICB0eXBlX2xpbmU/OiBzdHJpbmc7XG4gICAgICAgIGNvbG9yX2lkZW50aXR5Pzogc3RyaW5nW107XG4gICAgICAgIG1hbmFfY29zdD86IHN0cmluZztcbiAgICB9O1xufVxuXG5pbnRlcmZhY2UgQnVpbGRSZXF1ZXN0Qm9keSB7XG4gICAgY29tbWFuZGVyTmFtZTogc3RyaW5nO1xuICAgIGNvbGxlY3Rpb246IENvbGxlY3Rpb25DYXJkW107XG59XG5cbi8vXG4vLyAtLS0tIFJvdXRlIEhhbmRsZXIgLS0tLVxuLy9cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgICB0cnkge1xuICAgICAgICAvL1xuICAgICAgICAvLyBQYXJzZSByZXF1ZXN0IHNhZmVseVxuICAgICAgICAvL1xuICAgICAgICBjb25zdCBib2R5ID0gKGF3YWl0IHJlcXVlc3QuanNvbigpKSBhcyBCdWlsZFJlcXVlc3RCb2R5O1xuICAgICAgICBjb25zdCB7IGNvbW1hbmRlck5hbWUsIGNvbGxlY3Rpb24gPSBbXSB9ID0gYm9keTtcblxuICAgICAgICBpZiAoIWNvbW1hbmRlck5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIkNvbW1hbmRlciBuYW1lIGlzIHJlcXVpcmVkXCIgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQnVpbGRpbmcgZGVjayBmb3I6XCIsIGNvbW1hbmRlck5hbWUpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkNvbGxlY3Rpb24gc2l6ZTpcIiwgY29sbGVjdGlvbi5sZW5ndGgpO1xuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEZldGNoIGNvbW1hbmRlciBkYXRhXG4gICAgICAgIC8vXG4gICAgICAgIGNvbnN0IGNvbW1hbmRlclJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgICAgICBgaHR0cHM6Ly9hcGkuc2NyeWZhbGwuY29tL2NhcmRzL25hbWVkP2V4YWN0PSR7ZW5jb2RlVVJJQ29tcG9uZW50KGNvbW1hbmRlck5hbWUpfWBcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoIWNvbW1hbmRlclJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ29tbWFuZGVyIG5vdCBmb3VuZDpcIiwgY29tbWFuZGVyTmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJDb21tYW5kZXIgbm90IGZvdW5kXCIgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvbW1hbmRlcjogU2NyeWZhbGxDYXJkID0gYXdhaXQgY29tbWFuZGVyUmVzcG9uc2UuanNvbigpO1xuICAgICAgICBjb25zdCBjb21tYW5kZXJDb2xvcnMgPSBjb21tYW5kZXIuY29sb3JfaWRlbnRpdHkgPz8gW107XG5cbiAgICAgICAgY29uc29sZS5sb2coXCJDb21tYW5kZXIgY29sb3JzOlwiLCBjb21tYW5kZXJDb2xvcnMpO1xuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIERlY2sgY29udGFpbmVyXG4gICAgICAgIC8vXG4gICAgICAgIGNvbnN0IFRBUkdFVF9OT05fTEFORCA9IDYwO1xuICAgICAgICBjb25zdCBUQVJHRVRfTEFORFMgPSAzOTtcbiAgICAgICAgY29uc3QgY2FyZE5hbWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIC0tLS0gU1RFUCAxOiBGaWx0ZXIgY29sbGVjdGlvbiAtLS0tXG4gICAgICAgIC8vXG5cbiAgICAgICAgY29uc3QgZWxpZ2libGUgPSBjb2xsZWN0aW9uLmZpbHRlcigoY2FyZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IGNhcmQuZGV0YWlscz8udHlwZV9saW5lID8/IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBjaSA9IGNhcmQuZGV0YWlscz8uY29sb3JfaWRlbnRpdHkgPz8gW107XG5cbiAgICAgICAgICAgIGlmIChjYXJkLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gY29tbWFuZGVyTmFtZS50b0xvd2VyQ2FzZSgpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAodHlwZS5pbmNsdWRlcyhcIkJhc2ljIExhbmRcIikpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBjaS5ldmVyeSgoYykgPT4gY29tbWFuZGVyQ29sb3JzLmluY2x1ZGVzKGMpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2luZ2xldG9uIHJ1bGU6IGRlZHVwZSBieSBuYW1lXG4gICAgICAgIGNvbnN0IHVuaXF1ZUVsaWdpYmxlID0gQXJyYXkuZnJvbShuZXcgTWFwKGVsaWdpYmxlLm1hcCgoYykgPT4gW2MubmFtZSwgY10pKS52YWx1ZXMoKSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coXCJFbGlnaWJsZTpcIiwgdW5pcXVlRWxpZ2libGUubGVuZ3RoKTtcblxuICAgICAgICAvL1xuICAgICAgICAvLyBDYXRlZ29yaXplXG4gICAgICAgIC8vXG4gICAgICAgIC8vXG4gICAgICAgIC8vIC0tLS0gU1RFUCAxLjU6IEZldGNoIFN0YXBsZXMgKE5FVykgLS0tLVxuICAgICAgICAvL1xuICAgICAgICBjb25zdCBUQVJHRVRfU1RBUExFUyA9IDE1O1xuICAgICAgICBjb25zdCBzdGFwbGVzOiBTY3J5ZmFsbENhcmRbXSA9IFtdO1xuICAgICAgICBjb25zdCBzdWdnZXN0ZWREZXRhaWxzOiBTY3J5ZmFsbENhcmRbXSA9IFtdO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjb2xvclF1ZXJ5ID0gY29tbWFuZGVyQ29sb3JzLmxlbmd0aCA9PT0gMCA/IFwiaWQ6Y1wiIDogYGlkPD0ke2NvbW1hbmRlckNvbG9ycy5qb2luKFwiXCIpfWA7XG4gICAgICAgICAgICAvLyBGZXRjaCBzbGlnaHRseSBtb3JlIHRvIGVuc3VyZSB3ZSBnZXQgbm9uLWxhbmRzXG4gICAgICAgICAgICBjb25zdCBzdGFwbGVzUmVzcCA9IGF3YWl0IGZldGNoKGBodHRwczovL2FwaS5zY3J5ZmFsbC5jb20vY2FyZHMvc2VhcmNoP3E9JHtlbmNvZGVVUklDb21wb25lbnQoYCR7Y29sb3JRdWVyeX0gbGVnYWw6Y29tbWFuZGVyIC10OmxhbmQgLXQ6YmFzaWNgKX0mb3JkZXI9ZWRocmVjJmRpcj1hc2MmcGFnZT0xYCk7XG4gICAgICAgICAgICBpZiAoc3RhcGxlc1Jlc3Aub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgc3RhcGxlc1Jlc3AuanNvbigpO1xuICAgICAgICAgICAgICAgIC8vIEZpbHRlciBvdXQgY29tbWFuZGVyIGl0c2VsZiBqdXN0IGluIGNhc2VcbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0ID0gZGF0YS5kYXRhLmZpbHRlcigoYzogYW55KSA9PiBjLm5hbWUgIT09IGNvbW1hbmRlck5hbWUpLnNsaWNlKDAsIFRBUkdFVF9TVEFQTEVTKTtcbiAgICAgICAgICAgICAgICBzdGFwbGVzLnB1c2goLi4ubGlzdCk7XG4gICAgICAgICAgICAgICAgc3VnZ2VzdGVkRGV0YWlscy5wdXNoKC4uLmxpc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHN0YXBsZXNcIiwgZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIZWxwZXIgcHJlZGljYXRlc1xuICAgICAgICBjb25zdCBpc0NyZWF0dXJlID0gKHQ6IHN0cmluZywgbjogc3RyaW5nKSA9PiB0LmluY2x1ZGVzKFwiQ3JlYXR1cmVcIikgJiYgIXQuaW5jbHVkZXMoXCJMZWdlbmRhcnlcIik7XG4gICAgICAgIGNvbnN0IGlzUmVtb3ZhbCA9ICh0OiBzdHJpbmcsIG46IHN0cmluZykgPT4gL0luc3RhbnR8U29yY2VyeS8udGVzdCh0KSAmJiAvZGVzdHJveXxleGlsZXxraWxsfHRlcm1pbmF0ZXxwYXRofHN3b3Jkc3x3cmF0aHxkYW1uYXRpb258d2lwZS8udGVzdChuLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICBjb25zdCBpc1JhbXAgPSAodDogc3RyaW5nLCBuOiBzdHJpbmcpID0+IC8oQXJ0aWZhY3R8RW5jaGFudG1lbnR8U29yY2VyeSkvLnRlc3QodCkgJiYgLyhzb2wgcmluZ3xtYW5hfHJhbXB8Y3VsdGl2YXRlfGtvZGFtYXxyZWFjaHxzaWduZXR8dGFsaXNtYW58YXJjYW5lfGZlbGx3YXIpLy50ZXN0KG4udG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGNvbnN0IGlzRHJhdyA9IChuOiBzdHJpbmcpID0+IC8oZHJhd3xyaHlzdGljfHN0dWR5fG15c3RpY3xyZW1vcmF8cGh5cmV4aWFuIGFyZW5hfG5lY3JvcG90ZW5jZXxzeWx2YW4gbGlicmFyeSkvLnRlc3Qobi50b0xvd2VyQ2FzZSgpKTtcblxuICAgICAgICAvLyBBZGQgc3RhcGxlcyBhbmQgY291bnRcbiAgICAgICAgbGV0IHJhbXBDb3VudCA9IDA7XG4gICAgICAgIGxldCBkcmF3Q291bnQgPSAwO1xuICAgICAgICBsZXQgcmVtb3ZhbENvdW50ID0gMDtcbiAgICAgICAgbGV0IGNyZWF0dXJlQ291bnQgPSAwO1xuXG4gICAgICAgIHN0YXBsZXMuZm9yRWFjaChjID0+IHtcbiAgICAgICAgICAgIGNhcmROYW1lcy5wdXNoKGMubmFtZSk7XG4gICAgICAgICAgICBjb25zdCB0ID0gYy50eXBlX2xpbmUgfHwgXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBjLm5hbWU7XG5cbiAgICAgICAgICAgIGlmIChpc1JhbXAodCwgbikpIHJhbXBDb3VudCsrO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNEcmF3KG4pKSBkcmF3Q291bnQrKztcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUmVtb3ZhbCh0LCBuKSkgcmVtb3ZhbENvdW50Kys7XG4gICAgICAgICAgICBlbHNlIGlmIChpc0NyZWF0dXJlKHQsIG4pKSBjcmVhdHVyZUNvdW50Kys7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGBBZGRlZCAke3N0YXBsZXMubGVuZ3RofSBzdGFwbGVzLiBSYW1wOiAke3JhbXBDb3VudH0sIERyYXc6ICR7ZHJhd0NvdW50fSwgUmVtb3ZhbDogJHtyZW1vdmFsQ291bnR9LCBDcmVhdHVyZXM6ICR7Y3JlYXR1cmVDb3VudH1gKTtcblxuICAgICAgICAvL1xuICAgICAgICAvLyBDYXRlZ29yaXplIENvbGxlY3Rpb24gKGV4Y2x1ZGluZyBzdGFwbGVzKVxuICAgICAgICAvL1xuICAgICAgICBjb25zdCBjcmVhdHVyZXMgPSB1bmlxdWVFbGlnaWJsZS5maWx0ZXIoKGMpID0+IHtcbiAgICAgICAgICAgIGlmIChjYXJkTmFtZXMuaW5jbHVkZXMoYy5uYW1lKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgdCA9IGMuZGV0YWlscz8udHlwZV9saW5lID8/IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBuID0gYy5uYW1lO1xuICAgICAgICAgICAgcmV0dXJuIGlzQ3JlYXR1cmUodCwgbik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHJlbW92YWwgPSB1bmlxdWVFbGlnaWJsZS5maWx0ZXIoKGMpID0+IHtcbiAgICAgICAgICAgIGlmIChjYXJkTmFtZXMuaW5jbHVkZXMoYy5uYW1lKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgdCA9IGMuZGV0YWlscz8udHlwZV9saW5lID8/IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBuID0gYy5uYW1lO1xuICAgICAgICAgICAgcmV0dXJuIGlzUmVtb3ZhbCh0LCBuKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcmFtcCA9IHVuaXF1ZUVsaWdpYmxlLmZpbHRlcigoYykgPT4ge1xuICAgICAgICAgICAgaWYgKGNhcmROYW1lcy5pbmNsdWRlcyhjLm5hbWUpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCB0ID0gYy5kZXRhaWxzPy50eXBlX2xpbmUgPz8gXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBjLm5hbWU7XG4gICAgICAgICAgICByZXR1cm4gaXNSYW1wKHQsIG4pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBkcmF3ID0gdW5pcXVlRWxpZ2libGUuZmlsdGVyKChjKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2FyZE5hbWVzLmluY2x1ZGVzKGMubmFtZSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBjLm5hbWU7XG4gICAgICAgICAgICByZXR1cm4gaXNEcmF3KG4pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBub25CYXNpY0xhbmRzID0gdW5pcXVlRWxpZ2libGUuZmlsdGVyKChjKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gYy5kZXRhaWxzPy50eXBlX2xpbmUgPz8gXCJcIjtcbiAgICAgICAgICAgIHJldHVybiB0LmluY2x1ZGVzKFwiTGFuZFwiKSAmJiAhdC5pbmNsdWRlcyhcIkJhc2ljXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBvdGhlciA9IHVuaXF1ZUVsaWdpYmxlLmZpbHRlcihcbiAgICAgICAgICAgIChjKSA9PiAhY2FyZE5hbWVzLmluY2x1ZGVzKGMubmFtZSkgJiZcbiAgICAgICAgICAgICAgICAhY3JlYXR1cmVzLmluY2x1ZGVzKGMpICYmICFyZW1vdmFsLmluY2x1ZGVzKGMpICYmXG4gICAgICAgICAgICAgICAgIXJhbXAuaW5jbHVkZXMoYykgJiYgIWRyYXcuaW5jbHVkZXMoYykgJiYgIW5vbkJhc2ljTGFuZHMuaW5jbHVkZXMoYylcbiAgICAgICAgKTtcblxuICAgICAgICAvL1xuICAgICAgICAvLyBDYXJkLWFkZGluZyBoZWxwZXJcbiAgICAgICAgLy9cbiAgICAgICAgY29uc3QgYWRkQ2FyZHMgPSAobGlzdDogQ29sbGVjdGlvbkNhcmRbXSwgbWF4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNob3NlbiA9IGxpc3Quc2xpY2UoMCwgbWF4KS5tYXAoKGMpID0+IGMubmFtZSk7XG4gICAgICAgICAgICBjYXJkTmFtZXMucHVzaCguLi5jaG9zZW4pO1xuICAgICAgICAgICAgcmV0dXJuIGNob3Nlbi5sZW5ndGg7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gQnVpbGQgbm9uLWxhbmQgc2VjdGlvbiB1c2luZyByYXRpb3MgKGFkanVzdGVkIGZvciBzdGFwbGVzKVxuICAgICAgICAvL1xuICAgICAgICBsZXQgYWRkZWQgPSAwO1xuICAgICAgICBhZGRlZCArPSBhZGRDYXJkcyhyYW1wLCBNYXRoLm1heCgwLCAxMCAtIHJhbXBDb3VudCkpO1xuICAgICAgICBhZGRlZCArPSBhZGRDYXJkcyhkcmF3LCBNYXRoLm1heCgwLCA1IC0gZHJhd0NvdW50KSk7XG4gICAgICAgIGFkZGVkICs9IGFkZENhcmRzKHJlbW92YWwsIE1hdGgubWF4KDAsIDEwIC0gcmVtb3ZhbENvdW50KSk7XG4gICAgICAgIGFkZGVkICs9IGFkZENhcmRzKGNyZWF0dXJlcywgTWF0aC5tYXgoMCwgMzAgLSBjcmVhdHVyZUNvdW50KSk7XG5cbiAgICAgICAgLy8gRmlsbCByZW1haW5kZXIgd2l0aCBvdGhlciBjYXJkcyBmcm9tIGNvbGxlY3Rpb25cbiAgICAgICAgY29uc3QgcmVtYWluaW5nU2xvdHMgPSBNYXRoLm1heCgwLCBUQVJHRVRfTk9OX0xBTkQgLSBjYXJkTmFtZXMubGVuZ3RoKTtcbiAgICAgICAgYWRkZWQgKz0gYWRkQ2FyZHMob3RoZXIsIHJlbWFpbmluZ1Nsb3RzKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhcIkFkZGVkIGZyb20gY29sbGVjdGlvbjpcIiwgYWRkZWQpO1xuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIC0tLS0gU1RFUCAyOiBTdWdnZXN0IFNjcnlmYWxsIGZpbGxlcnMgaWYgbmVlZGVkIC0tLS1cbiAgICAgICAgLy9cbiAgICAgICAgaWYgKGNhcmROYW1lcy5sZW5ndGggPCBUQVJHRVRfTk9OX0xBTkQpIHtcbiAgICAgICAgICAgIGNvbnN0IG5lZWQgPSBUQVJHRVRfTk9OX0xBTkQgLSBjYXJkTmFtZXMubGVuZ3RoO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJOZWVkIGFkZGl0aW9uYWw6XCIsIG5lZWQpO1xuXG4gICAgICAgICAgICBjb25zdCBjb2xvclF1ZXJ5ID1cbiAgICAgICAgICAgICAgICBjb21tYW5kZXJDb2xvcnMubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgICAgID8gXCJpZDpjXCJcbiAgICAgICAgICAgICAgICAgICAgOiBgaWQ8PSR7Y29tbWFuZGVyQ29sb3JzLmpvaW4oXCJcIil9YDtcblxuICAgICAgICAgICAgY29uc3Qgc2NyeVF1ZXJ5ID0gYCR7Y29sb3JRdWVyeX0gLXQ6YmFzaWMgZjpjb21tYW5kZXIgbGVnYWw6Y29tbWFuZGVyIHVzZDw9MmA7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgICAgICAgICBgaHR0cHM6Ly9hcGkuc2NyeWZhbGwuY29tL2NhcmRzL3NlYXJjaD9xPSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICAgICAgICAgICAgICBzY3J5UXVlcnlcbiAgICAgICAgICAgICAgICApfSZvcmRlcj1lZGhyZWMmZGlyPWFzYyZwYWdlPTFgXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAocmVzcC5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGE6IHsgZGF0YTogU2NyeWZhbGxDYXJkW10gfSA9IGF3YWl0IHJlc3AuanNvbigpO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBkYXRhLmRhdGFcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoYykgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIGMubmFtZS50b0xvd2VyQ2FzZSgpICE9PSBjb21tYW5kZXJOYW1lLnRvTG93ZXJDYXNlKCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICFjYXJkTmFtZXMuaW5jbHVkZXMoYy5uYW1lKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC5zbGljZSgwLCBuZWVkKTtcblxuICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb25zLmZvckVhY2goYyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNhcmROYW1lcy5wdXNoKGMubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RlZERldGFpbHMucHVzaChjKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIC0tLS0gU1RFUCAzOiBBZGQgbGFuZHMgLS0tLVxuICAgICAgICAvL1xuICAgICAgICBjb25zdCBiYXNpY01hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgICAgIFc6IFwiUGxhaW5zXCIsXG4gICAgICAgICAgICBVOiBcIklzbGFuZFwiLFxuICAgICAgICAgICAgQjogXCJTd2FtcFwiLFxuICAgICAgICAgICAgUjogXCJNb3VudGFpblwiLFxuICAgICAgICAgICAgRzogXCJGb3Jlc3RcIixcbiAgICAgICAgfTtcblxuICAgICAgICBsZXQgbGFuZENvdW50ID0gMDtcblxuICAgICAgICAvLyBhZGQgbm9uLWJhc2ljIGZyb20gY29sbGVjdGlvblxuICAgICAgICBjb25zdCBlbGlnaWJsZU5vbkJhc2ljTGFuZHMgPSB1bmlxdWVFbGlnaWJsZS5maWx0ZXIoKGMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBjLmRldGFpbHM/LnR5cGVfbGluZSA/PyBcIlwiO1xuICAgICAgICAgICAgY29uc3QgY2kgPSBjLmRldGFpbHM/LmNvbG9yX2lkZW50aXR5ID8/IFtdO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICB0eXBlLmluY2x1ZGVzKFwiTGFuZFwiKSAmJlxuICAgICAgICAgICAgICAgICF0eXBlLmluY2x1ZGVzKFwiQmFzaWNcIikgJiZcbiAgICAgICAgICAgICAgICBjaS5ldmVyeSgoeCkgPT4gY29tbWFuZGVyQ29sb3JzLmluY2x1ZGVzKHgpKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgbm9uQmFzaWNUb0FkZCA9IE1hdGgubWluKGVsaWdpYmxlTm9uQmFzaWNMYW5kcy5sZW5ndGgsIE1hdGguZmxvb3IoVEFSR0VUX0xBTkRTIC8gMikpO1xuICAgICAgICBlbGlnaWJsZU5vbkJhc2ljTGFuZHMuc2xpY2UoMCwgbm9uQmFzaWNUb0FkZCkuZm9yRWFjaCgoYykgPT4gY2FyZE5hbWVzLnB1c2goYy5uYW1lKSk7XG4gICAgICAgIGxhbmRDb3VudCArPSBub25CYXNpY1RvQWRkO1xuXG4gICAgICAgIC8vIGZpbGwgd2l0aCBiYXNpY3NcbiAgICAgICAgY29uc3QgcmVtYWluaW5nID0gVEFSR0VUX0xBTkRTIC0gbGFuZENvdW50O1xuICAgICAgICBjb25zdCBwZXJDb2xvciA9IGNvbW1hbmRlckNvbG9ycy5sZW5ndGggPyBNYXRoLmZsb29yKHJlbWFpbmluZyAvIGNvbW1hbmRlckNvbG9ycy5sZW5ndGgpIDogMDtcbiAgICAgICAgY29uc3QgZXh0cmEgPSBjb21tYW5kZXJDb2xvcnMubGVuZ3RoID8gcmVtYWluaW5nICUgY29tbWFuZGVyQ29sb3JzLmxlbmd0aCA6IDA7XG5cbiAgICAgICAgY29tbWFuZGVyQ29sb3JzLmZvckVhY2goKGNvbG9yLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsYW5kTmFtZSA9IGJhc2ljTWFwW2NvbG9yXTtcbiAgICAgICAgICAgIGlmICghbGFuZE5hbWUpIHJldHVybjtcblxuICAgICAgICAgICAgbGV0IGNvdW50ID0gcGVyQ29sb3IgKyAoaSA8IGV4dHJhID8gMSA6IDApO1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBjb3VudDsgeCsrKSBjYXJkTmFtZXMucHVzaChsYW5kTmFtZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiVG90YWwgY2FyZHM6XCIsIGNhcmROYW1lcy5sZW5ndGgpO1xuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFJldHVybiBkZWNrXG4gICAgICAgIC8vXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGVja05hbWU6IGBBdXRvLWJ1aWx0ICR7Y29tbWFuZGVyTmFtZX0gZGVja2AsXG4gICAgICAgICAgICBjYXJkTmFtZXMsXG4gICAgICAgICAgICBzdWdnZXN0ZWREZXRhaWxzLFxuICAgICAgICAgICAgZGVja1VybDogYGh0dHBzOi8vZWRocmVjLmNvbS9jb21tYW5kZXJzLyR7Y29tbWFuZGVyLm5hbWVcbiAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXmEtejAtOV0rL2csIFwiLVwiKX1gLFxuICAgICAgICB9KTtcblxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiQXV0by1idWlsZCBlcnJvcjpcIiwgZXJyKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGVycm9yOiBcIkZhaWxlZCB0byBidWlsZCBkZWNrXCIsXG4gICAgICAgICAgICAgICAgZGV0YWlsczogZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFN0cmluZyhlcnIpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgICApO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJQT1NUIiwicmVxdWVzdCIsImJvZHkiLCJqc29uIiwiY29tbWFuZGVyTmFtZSIsImNvbGxlY3Rpb24iLCJlcnJvciIsInN0YXR1cyIsImNvbnNvbGUiLCJsb2ciLCJsZW5ndGgiLCJjb21tYW5kZXJSZXNwb25zZSIsImZldGNoIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwib2siLCJjb21tYW5kZXIiLCJjb21tYW5kZXJDb2xvcnMiLCJjb2xvcl9pZGVudGl0eSIsIlRBUkdFVF9OT05fTEFORCIsIlRBUkdFVF9MQU5EUyIsImNhcmROYW1lcyIsImVsaWdpYmxlIiwiZmlsdGVyIiwiY2FyZCIsInR5cGUiLCJkZXRhaWxzIiwidHlwZV9saW5lIiwiY2kiLCJuYW1lIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImV2ZXJ5IiwiYyIsInVuaXF1ZUVsaWdpYmxlIiwiQXJyYXkiLCJmcm9tIiwiTWFwIiwibWFwIiwidmFsdWVzIiwiVEFSR0VUX1NUQVBMRVMiLCJzdGFwbGVzIiwic3VnZ2VzdGVkRGV0YWlscyIsImNvbG9yUXVlcnkiLCJqb2luIiwic3RhcGxlc1Jlc3AiLCJkYXRhIiwibGlzdCIsInNsaWNlIiwicHVzaCIsImUiLCJpc0NyZWF0dXJlIiwidCIsIm4iLCJpc1JlbW92YWwiLCJ0ZXN0IiwiaXNSYW1wIiwiaXNEcmF3IiwicmFtcENvdW50IiwiZHJhd0NvdW50IiwicmVtb3ZhbENvdW50IiwiY3JlYXR1cmVDb3VudCIsImZvckVhY2giLCJjcmVhdHVyZXMiLCJyZW1vdmFsIiwicmFtcCIsImRyYXciLCJub25CYXNpY0xhbmRzIiwib3RoZXIiLCJhZGRDYXJkcyIsIm1heCIsImNob3NlbiIsImFkZGVkIiwiTWF0aCIsInJlbWFpbmluZ1Nsb3RzIiwibmVlZCIsInNjcnlRdWVyeSIsInJlc3AiLCJzdWdnZXN0aW9ucyIsImJhc2ljTWFwIiwiVyIsIlUiLCJCIiwiUiIsIkciLCJsYW5kQ291bnQiLCJlbGlnaWJsZU5vbkJhc2ljTGFuZHMiLCJ4Iiwibm9uQmFzaWNUb0FkZCIsIm1pbiIsImZsb29yIiwicmVtYWluaW5nIiwicGVyQ29sb3IiLCJleHRyYSIsImNvbG9yIiwiaSIsImxhbmROYW1lIiwiY291bnQiLCJzdWNjZXNzIiwiZGVja05hbWUiLCJkZWNrVXJsIiwicmVwbGFjZSIsImVyciIsIkVycm9yIiwibWVzc2FnZSIsIlN0cmluZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auto-build/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauto-build%2Froute&page=%2Fapi%2Fauto-build%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauto-build%2Froute.ts&appDir=%2Fhome%2Ffelix%2FDesktop%2FCommanderDeckBuilder%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Ffelix%2FDesktop%2FCommanderDeckBuilder&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();